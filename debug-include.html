<!--
Add this to your video player pages to enable comprehensive debug logging
Place this script tag in the <head> or at the end of <body>
-->

<script src="video-debug-logger.js"></script>

<!-- Alternative: Inline version (copy/paste this into existing pages) -->
<script>
(function() {
    console.log('🔍 INLINE DEBUG LOGGER STARTED');
    console.log('='.repeat(80));

    const now = new Date();
    const utcDate = new Date(now.toISOString());
    const utcMidnight = new Date(utcDate.getUTCFullYear(), utcDate.getUTCMonth(), utcDate.getUTCDate());
    const daysSinceEpoch = Math.floor(utcMidnight.getTime() / (24 * 60 * 60 * 1000));
    const utcSeed = (daysSinceEpoch * 31) % 1000000;

    console.log('🌍 BROWSER INFO:');
    console.log('  Local Time:', now.toString());
    console.log('  UTC Time:', now.toUTCString());
    console.log('  Timezone:', Intl.DateTimeFormat().resolvedOptions().timeZone);
    console.log('  UTC Date:', now.toISOString().split('T')[0]);
    console.log('  UTC Hour:', now.getUTCHours());
    console.log('  User Agent:', navigator.userAgent);

    console.log('🎲 SCHEDULE CALCULATION:');
    console.log('  UTC Date:', utcDate.toISOString());
    console.log('  UTC Midnight:', utcMidnight.toISOString());
    console.log('  Days Since Epoch:', daysSinceEpoch);
    console.log('  Calculated UTC Seed:', utcSeed);

    // Store globally for access
    window.browserDebugInfo = {
        utcSeed,
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        localTime: now.toString(),
        utcTime: now.toUTCString(),
        userAgent: navigator.userAgent
    };

    // Log current schedule state
    setInterval(() => {
        if (window.videoScheduler) {
            console.log('🔄 SCHEDULE UPDATE:', {
                currentIndex: window.videoScheduler.schedule?.currentIndex,
                currentVideo: window.videoScheduler.schedule?.currentVideo,
                totalPlayed: window.videoScheduler.schedule?.totalPlayed,
                staticDetected: window.videoScheduler.schedule?.staticDetected
            });
        }
    }, 30000);

    // Log video state
    setInterval(() => {
        const videos = document.querySelectorAll('video');
        if (videos.length > 0) {
            console.log('📹 VIDEO STATE:');
            videos.forEach((video, index) => {
                console.log(`  Video ${index}:`, {
                    src: video.src ? video.src.split('/').pop() : 'no src',
                    readyState: video.readyState,
                    currentTime: video.currentTime,
                    paused: video.paused
                });
            });
        }
    }, 10000);

    // Convenience method
    window.dumpDebugInfo = function() {
        console.log('📊 FULL DEBUG DUMP:');
        console.log('='.repeat(80));
        console.log('Browser Info:', window.browserDebugInfo);

        if (window.videoScheduler) {
            console.log('Schedule Info:', {
                currentIndex: window.videoScheduler.schedule?.currentIndex,
                currentVideo: window.videoScheduler.schedule?.currentVideo,
                totalPlayed: window.videoScheduler.schedule?.totalPlayed
            });
        }

        const videos = document.querySelectorAll('video');
        console.log('Videos:', Array.from(videos).map(v => ({
            src: v.src ? v.src.split('/').pop() : 'no src',
            readyState: v.readyState,
            paused: v.paused
        })));

        console.log('LocalStorage:', {
            currentIndex: localStorage.getItem('currentVideoIndex'),
            forcePosition: localStorage.getItem('forcePosition')
        });
    };

    console.log('🔧 Debug logger ready. Use dumpDebugInfo() for full report.');
})();
</script>