<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Scheduler Debug Injection</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #00ff00;
        }
        .container {
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #00ff00;
        }
        .command {
            background-color: #333;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 4px solid #00ff00;
        }
        .copy-btn {
            background-color: #00ff00;
            color: #000;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .copy-btn:hover {
            background-color: #00cc00;
        }
        .warning {
            color: #ff6600;
            border: 1px solid #ff6600;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Video Scheduler Debug Tools</h1>

        <div class="warning">
            <strong>‚ö†Ô∏è Important:</strong> Open your video site first, then come back to this page and follow the instructions below.
        </div>

        <h2>üìã Quick Debug Instructions</h2>

        <div class="success">
            <strong>Fastest Method:</strong><br>
            1. Open your video site in the browser<br>
            2. Press F12 to open Developer Tools<br>
            3. Go to Console tab<br>
            4. Copy and paste the code below and press Enter
        </div>

        <div class="command">
            <strong>üöÄ Quick Check (Copy & Paste This):</strong><br>
            <code id="quickCheckCode">
(function(){const d=new Date();console.log('‚ö° QUICK SCHEDULE CHECK');console.log('='.repeat(40));const info={userAgent:navigator.userAgent,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timezoneOffset:new Date().getTimezoneOffset(),localTime:new Date().toString(),utcTime:new Date().toUTCString(),utcDate:new Date().toISOString().split('T')[0],utcHour:new Date().getUTCHours(),timestamp:Date.now()};console.log('Timezone:',info.timezone);console.log('Local Time:',info.localTime);console.log('UTC Time:',info.utcTime);console.log('UTC Date:',info.utcDate);console.log('UTC Hour:',info.utcHour);const utcDate=new Date(d.toISOString());const utcMidnight=new Date(utcDate.getUTCFullYear(),utcDate.getUTCMonth(),utcDate.getUTCDate());const daysSinceEpoch=Math.floor(utcMidnight.getTime()/(24*60*60*1000));const seed=(daysSinceEpoch*31)%1000000;console.log('üé≤ Your UTC seed:',seed);console.log('üìã Copy this output and share for diagnosis');return{info,seed}})()
            </code><br>
            <button class="copy-btn" onclick="copyToClipboard('quickCheckCode')">Copy to Clipboard</button>
        </div>

        <h2>üîç Full Diagnostic (if issues persist)</h2>

        <div class="command">
            <strong>Complete Analysis (Copy & Paste This):</strong><br>
            <code id="fullDiagnosticCode">
fetch('/video-schedule.json').then(r=>r.json()).then(s=>{console.clear();console.log('üîç SCHEDULE DIAGNOSTIC');console.log('='.repeat(60));const d=new Date();console.log('Browser Info:');console.log('  Timezone:',Intl.DateTimeFormat().resolvedOptions().timeZone);console.log('  Local:',d.toString());console.log('  UTC:',d.toUTCString());console.log('  UTC Date:',d.toISOString().split('T')[0]);const utcDate=new Date(d.toISOString());const utcMidnight=new Date(utcDate.getUTCFullYear(),utcDate.getUTCMonth(),utcDate.getUTCDate());const daysSinceEpoch=Math.floor(utcMidnight.getTime()/(24*60*60*1000));const browserSeed=(daysSinceEpoch*31)%1000000;console.log('üé≤ Browser UTC seed:',browserSeed);console.log('üìã Server Schedule:');console.log('  Generated:',new Date(s.generated).toUTCString());console.log('  Current Index:',s.currentIndex);console.log('  Current Video:',s.currentVideo);console.log('  Total Videos:',s.shuffledOrder.length);console.log('  First 3 videos:',s.shuffledOrder.slice(0,3));fetch('/scheduler-config.json').then(r=>r.json()).then(c=>{console.log('‚öôÔ∏è Server Config:');console.log('  Shuffle Seed:',c.shuffleSeed);console.log('  Timezone Mode:',c.timezoneMode);console.log('  Daily Reset:',c.dailySeedReset);console.log('üîç Comparison:');console.log('  Browser Seed:',browserSeed);console.log('  Server Seed:',c.shuffleSeed);console.log('  Seeds Match:',browserSeed===c.shuffleSeed?'‚úÖ YES':'‚ùå NO');if(browserSeed!==c.shuffleSeed){console.log('‚ö†Ô∏è SEED MISMATCH - This explains different clips!');}console.log('üìã Share this output for diagnosis');}).catch(e=>console.log('‚ùå Config fetch failed:',e))}).catch(e=>console.log('‚ùå Schedule fetch failed:',e))
            </code><br>
            <button class="copy-btn" onclick="copyToClipboard('fullDiagnosticCode')">Copy to Clipboard</button>
        </div>

        <h2>üìù What to Share</h2>
        <p>After running either command above, copy the entire console output and share it. We'll be able to see:</p>
        <ul>
            <li>Your browser's timezone and time settings</li>
            <li>The UTC seed your browser calculated</li>
            <li>The server's schedule and configuration</li>
            <li>Whether the seeds match (‚úÖ) or don't match (‚ùå)</li>
        </ul>

        <h2>üîß Manual Steps</h2>
        <ol>
            <li>Open your video site in Browser A</li>
            <li>Run the debug command and note the "Current Video"</li>
            <li>Open the same site in Browser B</li>
            <li>Run the debug command and compare the "Current Video"</li>
            <li>Share both outputs for comparison</li>
        </ol>

        <div class="warning">
            <strong>üí° Pro Tip:</strong> The most important thing to check is whether the "Browser UTC seed" and "Server Seed" match. If they don't match, that's why you're seeing different clips!
        </div>
    </div>

    <script>
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const textArea = document.createElement('textarea');
            textArea.value = element.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);

            const button = element.nextElementSibling;
            const originalText = button.textContent;
            button.textContent = 'Copied!';
            button.style.backgroundColor = '#00cc00';

            setTimeout(() => {
                button.textContent = originalText;
                button.style.backgroundColor = '#00ff00';
            }, 2000);
        }
    </script>
</body>
</html>